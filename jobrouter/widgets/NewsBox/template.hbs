<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css" type="text/css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.13.2/themes/base/jquery-ui.css">

<script>
let invisibleNews = document.getElementById("simplifyNewsBox_invisibleNews").innerHTML;
let invisibleCurrentAuthor = document.getElementById("simplifyNewsBox_invisiblecurrentAuthor").innerHTML;
let invisibleCanEdit = document.getElementById("simplifyNewsBox_invisibleCanEdit").innerHTML === 'true';

// Parse news data and handle empty case
let newsData = [];
try {
    if (invisibleNews && invisibleNews.trim() !== '') {
        newsData = JSON.parse(invisibleNews);
    }
} catch (e) {
    console.log('Error parsing news data:', e);
    newsData = [];
}

// Ensure newsData is an array
if (!Array.isArray(newsData)) {
    newsData = [];
}

simplifyNewsBox_widget();
$j('#simplifyNewsBox_outerBox').parent().toggleClass('simplifyNewsBox_background-red', true);

function simplifyNewsBox_widget(){
    let outerBox = document.getElementById("simplifyNewsBox_outerBox");

    // Show add button only if user can edit
    const addButton = document.querySelector('.simplifyNewsBox_add-news-btn');
    if (addButton) {
        addButton.style.display = invisibleCanEdit ? 'block' : 'none';
    }

    simplifyNewsBox_renderNews();
}

function simplifyNewsBox_renderNews() {
    const newsContainer = document.getElementById('simplifyNewsBox_newsContainer');
    newsContainer.innerHTML = '';

    // Check if there are no news items
    if (!newsData || newsData.length === 0) {
        const emptyState = document.createElement('div');
        emptyState.className = 'simplifyNewsBox_empty-state';
        emptyState.innerHTML = `
            <i class="fas fa-newspaper"></i>
            <h3>Keine Nachrichten vorhanden</h3>
            <p>Es wurden noch keine Nachrichten erstellt.</p>
        `;
        newsContainer.appendChild(emptyState);
        return;
    }

    newsData.forEach(news => {
        const newsItem = simplifyNewsBox_createNewsItem(news);
        newsContainer.appendChild(newsItem);
    });
}

function simplifyNewsBox_createNewsItem(news) {
    const newsItem = document.createElement('div');
    newsItem.className = 'simplifyNewsBox_news-item';

    // Build the edit info subtitle if lastEditBy exists
    let editInfo = '';
    if (news.lastEditBy && news.lastEditDate) {
        const editDate = simplifyNewsBox_formatDate(news.lastEditDate);
        editInfo = `<div class="simplifyNewsBox_news-edit-info">Zuletzt bearbeitet von ${news.lastEditBy} am ${editDate}</div>`;
    }

    // Build action buttons only if user can edit
    let actionButtons = '';
    if (invisibleCanEdit) {
        actionButtons = `
            <div class="simplifyNewsBox_news-actions">
                <button class="simplifyNewsBox_action-btn simplifyNewsBox_edit-btn" onclick="simplifyNewsBox_editNews(${news.id})">
                    <i class="fas fa-edit"></i>
                </button>
                <button class="simplifyNewsBox_action-btn simplifyNewsBox_delete-btn" onclick="simplifyNewsBox_confirmDelete(${news.id})">
                    <i class="fas fa-trash"></i>
                </button>
            </div>
        `;
    }

    newsItem.innerHTML = `
        <div class="simplifyNewsBox_news-header">
            <div class="simplifyNewsBox_news-meta">
                <span class="simplifyNewsBox_news-author">${news.author}</span>
                <span class="simplifyNewsBox_news-date">${simplifyNewsBox_formatDate(news.date)}</span>
            </div>
            ${actionButtons}
        </div>
        <div class="simplifyNewsBox_news-content">
            <h3 class="simplifyNewsBox_news-title">${news.title}</h3>
            <p class="simplifyNewsBox_news-message">${news.message}</p>
            ${editInfo}
        </div>
    `;
    return newsItem;
}

function simplifyNewsBox_formatDate(dateString) {
    const date = new Date(dateString);
    return date.toLocaleDateString('de-DE', {
        year: 'numeric',
        month: '2-digit',
        day: '2-digit'
    });
}

function simplifyNewsBox_editNews(id) {
    const news = newsData.find(n => n.id === id);
    if (news) {
        simplifyNewsBox_showNewsForm(news);
    }
}

function simplifyNewsBox_showNewsForm(news = null) {
    const isEdit = news !== null;
    const popup = document.getElementById('simplifyNewsBox_newsPopup');
    const form = document.getElementById('simplifyNewsBox_newsForm');
    const title = document.getElementById('simplifyNewsBox_popupTitle');
    const dateField = document.getElementById('simplifyNewsBox_newsDate');
    const authorField = document.getElementById('simplifyNewsBox_newsAuthor');

    title.textContent = isEdit ? 'Nachricht bearbeiten' : 'Neue Nachricht hinzufügen';

    if (isEdit) {
        authorField.value = news.author;
        authorField.disabled = true; // Disable author field when editing
        document.getElementById('simplifyNewsBox_newsTitle').value = news.title;
        document.getElementById('simplifyNewsBox_newsMessage').value = news.message;
        dateField.value = news.date;
        document.getElementById('simplifyNewsBox_newsDeleteDate').value = news.deleteDate || '';
        form.dataset.editId = news.id;
    } else {
        form.reset();
        // Set current author for new news and disable the field
        authorField.value = invisibleCurrentAuthor;
        authorField.disabled = true;
        // Set current date for new news
        dateField.value = new Date().toISOString().split('T')[0];
        document.getElementById('simplifyNewsBox_newsDeleteDate').value = '';
        delete form.dataset.editId;
    }

    popup.style.display = 'flex';
}

function simplifyNewsBox_hideNewsForm() {
    document.getElementById('simplifyNewsBox_newsPopup').style.display = 'none';
    document.getElementById('simplifyNewsBox_newsForm').reset();
}

function simplifyNewsBox_saveNews() {
    const form = document.getElementById('simplifyNewsBox_newsForm');
    const author = document.getElementById('simplifyNewsBox_newsAuthor').value.trim();
    const title = document.getElementById('simplifyNewsBox_newsTitle').value.trim();
    const message = document.getElementById('simplifyNewsBox_newsMessage').value.trim();
    const date = document.getElementById('simplifyNewsBox_newsDate').value;
    const deleteDate = document.getElementById('simplifyNewsBox_newsDeleteDate').value;

    if (!author || !title || !message || !date) {
        simplifyNewsBox_showToast('Bitte füllen Sie alle Felder aus', 'error');
        return;
    }

    const isEdit = form.dataset.editId;
    const submitButton = document.querySelector('.simplifyNewsBox_btn-primary');

    // Disable submit button during request
    submitButton.disabled = true;
    submitButton.textContent = isEdit ? 'Wird aktualisiert...' : 'Wird gespeichert...';

    const requestData = {
        author: author,
        title: title,
        message: message,
        date: date,
        deleteDate: deleteDate
    };

    if (isEdit) {
        requestData.isEdit = 'true';
        requestData.editId = isEdit;
        requestData.lastEditBy = invisibleCurrentAuthor; // Add who is editing
        requestData.lastEditDate = new Date().toISOString().split('T')[0]; // Current date
    } else {
        requestData.isNew = 'true';
    }

    $j.ajax({
        url: "dashboard/MyWidgets/NewsBox/query.php",
        type: "POST",
        data: requestData,
        dataType: "json",        success: function (response) {
            submitButton.disabled = false;
            submitButton.textContent = 'Speichern';

            if (response.success) {
                if (isEdit) {
                    // Update existing news item in local array
                    const newsIndex = newsData.findIndex(n => n.id == isEdit);
                    if (newsIndex !== -1) {
                        newsData[newsIndex] = {
                            ...newsData[newsIndex],
                            author,
                            title,
                            message,
                            date,
                            deleteDate: deleteDate || null,
                            lastEditBy: invisibleCurrentAuthor,
                            lastEditDate: new Date().toISOString().split('T')[0]
                        };
                    }
                    simplifyNewsBox_showToast('Nachricht erfolgreich aktualisiert', 'success');
                } else {
                    // Add new news item with the ID returned from backend
                    const newNews = {
                        id: response.newId || Date.now(), // Use backend ID or fallback to timestamp
                        author,
                        date,
                        title,
                        message,
                        deleteDate: deleteDate || null,
                        lastEditBy: null,
                        lastEditDate: null
                    };

                    if (!Array.isArray(newsData)) {
                        newsData = [];
                    }

                    // Add to beginning for newest first
                    newsData.unshift(newNews);
                    simplifyNewsBox_showToast('Nachricht erfolgreich erstellt', 'success');
                }

                // Update UI with new data
                simplifyNewsBox_renderNews();
                simplifyNewsBox_hideNewsForm();
            } else {
                simplifyNewsBox_showToast(response.message || 'Fehler beim Speichern der Nachricht', 'error');
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            submitButton.disabled = false;
            submitButton.textContent = 'Speichern';
            console.log('AJAX Error:', textStatus, errorThrown);
            simplifyNewsBox_showToast('Verbindungsfehler. Bitte versuchen Sie es erneut.', 'error');
        }
    });
}

function simplifyNewsBox_confirmDelete(id) {
    const news = newsData.find(n => n.id === id);
    if (news) {
        simplifyNewsBox_showDeleteConfirm(news);
    }
}

function simplifyNewsBox_showDeleteConfirm(news) {
    const popup = document.getElementById('simplifyNewsBox_deletePopup');
    const newsTitle = document.getElementById('simplifyNewsBox_deleteNewsTitle');
    const confirmBtn = document.getElementById('simplifyNewsBox_confirmDeleteBtn');

    newsTitle.textContent = news.title;
    confirmBtn.onclick = () => simplifyNewsBox_deleteNews(news.id);

    popup.style.display = 'flex';
}

function simplifyNewsBox_hideDeleteConfirm() {
    document.getElementById('simplifyNewsBox_deletePopup').style.display = 'none';
}

function simplifyNewsBox_deleteNews(id) {
    const deleteButton = document.getElementById('simplifyNewsBox_confirmDeleteBtn');
    deleteButton.disabled = true;
    deleteButton.textContent = 'Wird gelöscht...';

    $j.ajax({
        url: "dashboard/MyWidgets/NewsBox/query.php",
        type: "POST",
        data: {
            isDelete: 'true',
            deleteId: id
        },
        dataType: "json",        success: function (response) {
            deleteButton.disabled = false;
            deleteButton.textContent = 'Löschen';

            if (response.success) {
                // Remove item from local array
                newsData = newsData.filter(n => n.id !== id);

                // Update UI immediately
                simplifyNewsBox_renderNews();
                simplifyNewsBox_hideDeleteConfirm();
                simplifyNewsBox_showToast('Nachricht erfolgreich gelöscht', 'success');
            } else {
                simplifyNewsBox_showToast(response.message || 'Fehler beim Löschen der Nachricht', 'error');
            }
        },
        error: function (jqXHR, textStatus, errorThrown) {
            deleteButton.disabled = false;
            deleteButton.textContent = 'Löschen';
            console.log('AJAX Error:', textStatus, errorThrown);
            simplifyNewsBox_showToast('Verbindungsfehler. Bitte versuchen Sie es erneut.', 'error');
        }
    });
}

// Toast notification function
function simplifyNewsBox_showToast(message, type = 'info') {
    const toast = document.createElement('div');
    toast.className = `simplifyNewsBox_toast simplifyNewsBox_toast-${type}`;
    toast.textContent = message;

    const outerBox = document.getElementById('simplifyNewsBox_outerBox');
    outerBox.appendChild(toast);

    // Trigger animation
    setTimeout(() => {
        toast.classList.add('simplifyNewsBox_toast-show');
    }, 100);

    console.log('Toast message:', toast);
    // Remove toast after 4 seconds
    setTimeout(() => {
        toast.classList.remove('simplifyNewsBox_toast-show');
        setTimeout(() => {
            if (outerBox.contains(toast)) {
                outerBox.removeChild(toast);
            }
        }, 300);
    }, 4000);
}

// Close popups when clicking outside
window.onclick = function(event) {
    const newsPopup = document.getElementById('simplifyNewsBox_newsPopup');
    const deletePopup = document.getElementById('simplifyNewsBox_deletePopup');

    if (event.target === newsPopup) {
        simplifyNewsBox_hideNewsForm();
    }
    if (event.target === deletePopup) {
        simplifyNewsBox_hideDeleteConfirm();
    }
}

</script>

<style>
@import url('https://fonts.googleapis.com/css2?family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

:root {
    --newsbox-bg: #3B3E4D;
    --newsbox-accent: #FFCC0D;
    --newsbox-accent-hover: #FFD700;
    --newsbox-item-bg: #4A4D5C;
    --newsbox-item-bg-hover: #525566;
    --newsbox-border: #FFCC0D;
    --newsbox-date: #B8BCC8;
    --newsbox-edit-info: #999;
    --newsbox-btn-danger: #FF6B6B;
    --newsbox-btn-danger-hover: #FF5252;
    --newsbox-message: #E5E5E5;
    --newsbox-toast-success-bg: #2E7D32;
    --newsbox-toast-success-border: #4CAF50;
    --newsbox-toast-error-bg: #C62828;
    --newsbox-toast-error-border: #F44336;
    --newsbox-toast-info-bg: #4A4D5C;
    --newsbox-toast-info-border: #FFCC0D;
}

.simplifyNewsBox_background-red {
    background-color: var(--newsbox-bg);
    color: var(--newsbox-accent);
    border: none;
}

#simplifyNewsBox_outerBox {
    width: 99%;
    font-family: 'Poppins', sans-serif;
    font-size: 16px;
    background-color: var(--newsbox-bg);
    color: var(--newsbox-accent);
    padding: 5px 5px 5px 5px;
    border-radius: 8px;
    overflow-y: auto;
    overflow-x: hidden;
    max-height: 95%;
    position: relative;
}

.simplifyNewsBox_news-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 4px;
}

.simplifyNewsBox_add-news-btn {
    background-color: var(--newsbox-accent);
    color: var(--newsbox-bg);
    border: none;
    padding: 10px 20px;
    font-family: 'Poppins', sans-serif;
    font-weight: 600;
    font-size: 14px;
    border-radius: 6px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.simplifyNewsBox_add-news-btn:hover {
    background-color: var(--newsbox-accent-hover);
    transform: translateY(-2px);
}

.simplifyNewsBox_add-news-btn i {
    margin-right: 8px;
}

.simplifyNewsBox_news-item {
    background-color: var(--newsbox-item-bg);
    border-radius: 8px;
    padding: 15px;
    margin-bottom: 15px;
    border-left: 4px solid var(--newsbox-border);
    transition: all 0.3s ease;
}

.simplifyNewsBox_news-item:hover {
    background-color: var(--newsbox-item-bg-hover);
    transform: translateX(5px);
}

.simplifyNewsBox_news-item .simplifyNewsBox_news-header {
    margin-bottom: 12px;
}

.simplifyNewsBox_news-meta {
    display: flex;
    gap: 15px;
    align-items: center;
}

.simplifyNewsBox_news-author {
    font-weight: 600;
    color: var(--newsbox-accent);
}

.simplifyNewsBox_news-date {
    font-size: 12px;
    color: var(--newsbox-date);
    background-color: var(--newsbox-bg);
    padding: 4px 8px;
    border-radius: 12px;
}

.simplifyNewsBox_news-actions {
    display: flex;
    gap: 8px;
}

.simplifyNewsBox_action-btn {
    background: none;
    border: 1px solid var(--newsbox-border);
    color: var(--newsbox-accent);
    padding: 4px 10px;
    border-radius: 4px;
    cursor: pointer;
    transition: all 0.3s ease;
    font-size: 14px;
}

.simplifyNewsBox_action-btn:hover {
    background-color: var(--newsbox-accent);
    color: var(--newsbox-bg);
}

.simplifyNewsBox_delete-btn:hover {
    background-color: var(--newsbox-btn-danger);
    border-color: var(--newsbox-btn-danger);
    color: #fff;
}

.simplifyNewsBox_news-content {
    margin-top: 8px;
}

.simplifyNewsBox_news-title {
    font-size: 18px;
    font-weight: 600;
    color: var(--newsbox-accent);
    margin: 0 0 5px 0;
}

.simplifyNewsBox_news-message {
    font-size: 14px;
    line-height: 1.6;
    color: var(--newsbox-message);
    margin: 0;
}

.simplifyNewsBox_news-edit-info {
    font-size: 11px;
    color: var(--newsbox-edit-info);
    font-style: italic;
    margin-top: 8px;
    text-align: right;
}

/* Popup Styles */
.simplifyNewsBox_popup {
    display: none;
    position: absolute;
    z-index: 1000;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0,0,0,0.8);
    justify-content: center;
    align-items: center;
    border-radius: 8px;
}

.simplifyNewsBox_popup-content {
    background-color: var(--newsbox-bg);
    color: var(--newsbox-accent);
    padding: 25px;
    border-radius: 12px;
    width: 85%;
    max-width: 400px;
    border: 2px solid var(--newsbox-border);
    max-height: 85%;
    overflow-y: auto;
}

.simplifyNewsBox_popup-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 20px;
    border-bottom: 1px solid var(--newsbox-border);
    padding-bottom: 12px;
}

.simplifyNewsBox_popup-title {
    font-size: 20px;
    font-weight: 600;
    margin: 0;
}

.simplifyNewsBox_close-btn {
    background: none;
    border: none;
    color: var(--newsbox-accent);
    font-size: 24px;
    cursor: pointer;
    padding: 0;
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.simplifyNewsBox_close-btn:hover {
    color: var(--newsbox-accent-hover);
}

.simplifyNewsBox_form-group {
    margin-bottom: 15px;
}

.simplifyNewsBox_form-row {
    display: flex;
    gap: 12px;
    margin-bottom: 15px;
}

.simplifyNewsBox_form-group-half {
    flex: 1;
    margin-bottom: 0;
}

.simplifyNewsBox_form-label {
    display: block;
    margin-bottom: 8px;
    font-weight: 500;
    color: var(--newsbox-accent);
}

.simplifyNewsBox_newsBox_In, .simplifyNewsBox_form-textarea {
    width: 100%;
    padding: 10px;
    border: 1px solid var(--newsbox-border);
    border-radius: 6px;
    background-color: var(--newsbox-item-bg);
    color: var(--newsbox-message);
    font-size: 13px;
    box-sizing: border-box;
}

.simplifyNewsBox_newsBox_In:disabled {
    background-color: var(--newsbox-bg);
    color: var(--newsbox-date);
    border-color: #666;
    cursor: not-allowed;
}

#simplifyNewsBox_newsTitle {
    background-color: var(--newsbox-item-bg);
    color: var(--newsbox-message);
    border: 1px solid var(--newsbox-border);
}

.simplifyNewsBox_form-input:focus, .simplifyNewsBox_form-textarea:focus {
    outline: none;
    border-color: var(--newsbox-accent-hover);
    background-color: var(--newsbox-item-bg-hover);
}

#simplifyNewsBox_newsTitle:focus {
    outline: none;
    border-color: var(--newsbox-accent-hover);
    background-color: var(--newsbox-item-bg-hover);
}

.simplifyNewsBox_form-textarea {
    resize: vertical;
    min-height: 80px;
}

.simplifyNewsBox_popup-actions {
    display: flex;
    gap: 12px;
    justify-content: flex-end;
    margin-top: 20px;
}

.simplifyNewsBox_btn {
    padding: 10px 20px;
    border: none;
    border-radius: 6px;
    font-family: 'Poppins', sans-serif;
    font-weight: 500;
    font-size: 13px;
    cursor: pointer;
    transition: all 0.3s ease;
}

.simplifyNewsBox_btn-primary {
    background-color: var(--newsbox-accent);
    color: var(--newsbox-bg);
}

.simplifyNewsBox_btn-primary:hover {
    background-color: var(--newsbox-accent-hover);
}

.simplifyNewsBox_btn-secondary {
    background-color: transparent;
    color: var(--newsbox-accent);
    border: 1px solid var(--newsbox-border);
}

.simplifyNewsBox_btn-secondary:hover {
    background-color: var(--newsbox-accent);
    color: var(--newsbox-bg);
}

.simplifyNewsBox_btn-danger {
    background-color: var(--newsbox-btn-danger);
    color: #fff;
}

.simplifyNewsBox_btn-danger:hover {
    background-color: var(--newsbox-btn-danger-hover);
}

.simplifyNewsBox_delete-confirm-content {
    text-align: center;
}

.simplifyNewsBox_delete-confirm-message {
    font-size: 16px;
    margin-bottom: 10px;
}

.simplifyNewsBox_delete-news-title {
    font-weight: 600;
    color: var(--newsbox-accent-hover);
    font-style: italic;
}

.simplifyNewsBox_empty-state {
    text-align: center;
    padding: 60px 20px;
    color: var(--newsbox-date);
}

.simplifyNewsBox_empty-state i {
    font-size: 48px;
    margin-bottom: 20px;
    color: var(--newsbox-accent);
}

.simplifyNewsBox_empty-state h3 {
    font-size: 20px;
    margin-bottom: 10px;
    color: var(--newsbox-accent);
}

/* Toast Notifications */
.simplifyNewsBox_toast {
    position: absolute;
    top: 10px;
    right: 10px;
    background-color: var(--newsbox-toast-info-bg);
    color: #fff;
    padding: 12px 20px;
    border-radius: 6px;
    font-size: 14px;
    font-weight: 500;
    z-index: 1001;
    opacity: 0;
    transform: translateX(100%);
    transition: all 0.3s ease;
    border-left: 4px solid var(--newsbox-toast-info-border);
    max-width: 300px;
    word-wrap: break-word;
}

.simplifyNewsBox_toast-show {
    opacity: 1;
    transform: translateX(0);
}

.simplifyNewsBox_toast-success {
    border-left-color: var(--newsbox-toast-success-border);
    background-color: var(--newsbox-toast-success-bg);
}

.simplifyNewsBox_toast-error {
    border-left-color: var(--newsbox-toast-error-border);
    background-color: var(--newsbox-toast-error-bg);
}

.simplifyNewsBox_toast-info {
    border-left-color: var(--newsbox-toast-info-border);
    background-color: var(--newsbox-toast-info-bg);
}

</style>

<div id="simplifyNewsBox_invisibleNews" style="display: none;">{{news}}</div>
<div id="simplifyNewsBox_invisiblecurrentAuthor" style="display: none;">{{currentAuthor}}</div>
<div id="simplifyNewsBox_invisibleCanEdit" style="display: none;">{{canEdit}}</div>

<div id="simplifyNewsBox_outerBox">
    <div class="simplifyNewsBox_news-header">
        <button class="simplifyNewsBox_add-news-btn" onclick="simplifyNewsBox_ShowNewsForm()">
            <i class="fas fa-plus"></i>
            Nachricht hinzufügen
        </button>
    </div>

    <div id="simplifyNewsBox_newsContainer">
        <!-- News items will be rendered here -->
    </div>
</div>

<!-- Add/Edit News Popup -->
<div id="simplifyNewsBox_newsPopup" class="simplifyNewsBox_popup">
    <div class="simplifyNewsBox_popup-content">
        <div class="simplifyNewsBox_popup-header">
            <h3 id="simplifyNewsBox_popupTitle" class="simplifyNewsBox_popup-title">Neue Nachricht hinzufügen</h3>
            <button class="simplifyNewsBox_close-btn" onclick="simplifyNewsBox_hideNewsForm()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <form id="simplifyNewsBox_newsForm">
            <div class="simplifyNewsBox_form-row">
                <div class="simplifyNewsBox_form-group simplifyNewsBox_form-group-half">
                    <label for="simplifyNewsBox_newsAuthor" class="simplifyNewsBox_form-label">Autor</label>
                    <input type="text" id="simplifyNewsBox_newsAuthor" class="simplifyNewsBox_newsBox_In" required></input>
                </div>
                <div class="simplifyNewsBox_form-group simplifyNewsBox_form-group-half">
                    <label for="simplifyNewsBox_newsDate" class="simplifyNewsBox_form-label">Datum</label>
                    <input type="date" id="simplifyNewsBox_newsDate" class="simplifyNewsBox_newsBox_In" required></input>
                </div>
            </div>
            <div class="simplifyNewsBox_form-group">
                <label for="simplifyNewsBox_newsTitle" class="simplifyNewsBox_form-label">Titel</label>
                <input type="text" id="simplifyNewsBox_newsTitle" class="simplifyNewsBox_newsBox_In" required></input>
            </div>
            <div class="simplifyNewsBox_form-group">
                <label for="simplifyNewsBox_newsMessage" class="simplifyNewsBox_form-label">Nachricht</label>
                <textarea id="simplifyNewsBox_newsMessage" class="simplifyNewsBox_form-textarea" required></textarea>
            </div>
            <div class="simplifyNewsBox_form-group">
                <label for="simplifyNewsBox_newsDeleteDate" class="simplifyNewsBox_form-label">Löschen am (optional)</label>
                <input type="date" id="simplifyNewsBox_newsDeleteDate" class="simplifyNewsBox_newsBox_In">
            </div>
        </form>
        <div class="simplifyNewsBox_popup-actions">
            <button type="button" class="simplifyNewsBox_btn simplifyNewsBox_btn-secondary" onclick="simplifyNewsBox_hideNewsForm()">Abbrechen</button>
            <button type="button" class="simplifyNewsBox_btn simplifyNewsBox_btn-primary" onclick="simplifyNewsBox_saveNews()">Speichern</button>
        </div>
    </div>
</div>

<!-- Delete Confirmation Popup -->
<div id="simplifyNewsBox_deletePopup" class="simplifyNewsBox_popup">
    <div class="simplifyNewsBox_popup-content">
        <div class="simplifyNewsBox_popup-header">
            <h3 class="simplifyNewsBox_popup-title">Löschen bestätigen</h3>
            <button class="simplifyNewsBox_close-btn" onclick="simplifyNewsBox_hideDeleteConfirm()">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="simplifyNewsBox_delete-confirm-content">
            <p class="simplifyNewsBox_delete-confirm-message">Sind Sie sicher, dass Sie diese Nachricht löschen möchten?</p>
            <p><span class="simplifyNewsBox_delete-news-title" id="simplifyNewsBox_deleteNewsTitle"></span></p>
            <div class="simplifyNewsBox_popup-actions">
                <button type="button" class="simplifyNewsBox_btn simplifyNewsBox_btn-secondary" onclick="simplifyNewsBox_hideDeleteConfirm()">Abbrechen</button>
                <button type="button" class="simplifyNewsBox_btn simplifyNewsBox_btn-danger" id="simplifyNewsBox_confirmDeleteBtn">Löschen</button>
            </div>
        </div>
    </div>
</div>
